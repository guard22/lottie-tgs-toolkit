"use strict";(self["webpackChunklottie_tgs_toolkit"]=self["webpackChunklottie_tgs_toolkit"]||[]).push([[181],{81:function(t,e,i){var a=i(9565),n=i(9306),l=i(8551),o=i(6823),r=i(851),s=TypeError;t.exports=function(t,e){var i=arguments.length<2?r(t):e;if(n(i))return l(a(i,t));throw new s(o(t)+" is not iterable")}},851:function(t,e,i){var a=i(6955),n=i(5966),l=i(4117),o=i(6269),r=i(8227),s=r("iterator");t.exports=function(t){if(!l(t))return n(t,s)||n(t,"@@iterator")||o[a(t)]}},2652:function(t,e,i){var a=i(6080),n=i(9565),l=i(8551),o=i(6823),r=i(4209),s=i(6198),m=i(1625),d=i(81),u=i(851),c=i(9539),p=TypeError,y=function(t,e){this.stopped=t,this.result=e},k=y.prototype;t.exports=function(t,e,i){var L,v,h,b,f,D,A,E=i&&i.that,_=!(!i||!i.AS_ENTRIES),g=!(!i||!i.IS_RECORD),$=!(!i||!i.IS_ITERATOR),I=!(!i||!i.INTERRUPTED),C=a(e,E),w=function(t){return L&&c(L,"normal"),new y(!0,t)},T=function(t){return _?(l(t),I?C(t[0],t[1],w):C(t[0],t[1])):I?C(t,w):C(t)};if(g)L=t.iterator;else if($)L=t;else{if(v=u(t),!v)throw new p(o(t)+" is not iterable");if(r(v)){for(h=0,b=s(t);b>h;h++)if(f=T(t[h]),f&&m(k,f))return f;return new y(!1)}L=d(t,v)}D=g?t.next:L.next;while(!(A=n(D,L)).done){try{f=T(A.value)}catch(S){c(L,"throw",S)}if("object"==typeof f&&f&&m(k,f))return f}return new y(!1)}},4181:function(t,e,i){i.r(e),i.d(e,{default:function(){return O}});var a=i(641),n=i(33),l=i(3751);const o={class:"timeline-editor"},r={class:"editor-content"},s={key:0,class:"animation-info"},m={key:1,class:"animation-controls"},d={class:"controls-grid"},u={class:"control-group"},c={class:"control-group"},p={class:"control-group"},y={class:"control-group"},k=["min"],L={key:2,class:"layers-panel"},v={class:"layers-list"},h=["onClick"],b={class:"layer-header"},f={class:"layer-info"},D={class:"layer-name"},A={class:"layer-type"},E={class:"layer-controls"},_=["onClick","title"],g={class:"material-icons"},$={class:"timeline-info"},I={class:"timeline-param"},C=["onUpdate:modelValue"],w={class:"timeline-param"},T=["onUpdate:modelValue","min"],S={class:"timeline-param"},x={class:"timeline-value"},V={class:"timeline-bar"},R={class:"timeline-track"},U={class:"timeline-markers"},W={class:"quick-actions"},X={class:"actions-grid"},P=["disabled"],q=["disabled"];function F(t,e,i,F,N,z){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",r,[(0,a.Lk)("h2",null,(0,n.v_)(t.$t("timelineEditor.title")),1),(0,a.Lk)("p",null,(0,n.v_)(t.$t("timelineEditor.subtitle")),1),t.animData?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("h3",null,(0,n.v_)(t.$t("timelineEditor.animationInfo.title")),1),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,(0,n.v_)(t.$t("timelineEditor.animationInfo.name"))+":",1),(0,a.eW)(" "+(0,n.v_)(t.animData.nm||t.$t("timelineEditor.animationInfo.untitled")),1)]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,(0,n.v_)(t.$t("timelineEditor.animationInfo.size"))+":",1),(0,a.eW)(" "+(0,n.v_)(t.animData.w)+"x"+(0,n.v_)(t.animData.h),1)]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,(0,n.v_)(t.$t("timelineEditor.animationInfo.fps"))+":",1),(0,a.eW)(" "+(0,n.v_)(t.animData.fr),1)]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,(0,n.v_)(t.$t("timelineEditor.animationInfo.duration"))+":",1),(0,a.eW)(" "+(0,n.v_)(t.animData.op-t.animData.ip)+" "+(0,n.v_)(t.$t("timelineEditor.animationInfo.frames")),1)]),(0,a.Lk)("li",null,[(0,a.Lk)("strong",null,(0,n.v_)(t.$t("timelineEditor.animationInfo.layers"))+":",1),(0,a.eW)(" "+(0,n.v_)(t.animData.layers?.length||0),1)])])])):(0,a.Q3)("",!0),t.animData?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("h3",null,(0,n.v_)(t.$t("timelineEditor.animationSettings.title")),1),(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.animationSettings.animationName")),1),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>t.editableAnimData.nm=e),onInput:e[1]||(e[1]=(...e)=>t.updateAnimData&&t.updateAnimData(...e)),class:"control-input"},null,544),[[l.Jo,t.editableAnimData.nm]])]),(0,a.Lk)("div",c,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.animationSettings.fpsLabel")),1),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=e=>t.editableAnimData.fr=e),onInput:e[3]||(e[3]=(...e)=>t.updateAnimData&&t.updateAnimData(...e)),min:"1",max:"60",class:"control-input"},null,544),[[l.Jo,t.editableAnimData.fr,void 0,{number:!0}]])]),(0,a.Lk)("div",p,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.animationSettings.startFrame")),1),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=e=>t.editableAnimData.ip=e),onInput:e[5]||(e[5]=(...e)=>t.updateAnimData&&t.updateAnimData(...e)),min:"0",class:"control-input"},null,544),[[l.Jo,t.editableAnimData.ip,void 0,{number:!0}]])]),(0,a.Lk)("div",y,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.animationSettings.endFrame")),1),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=e=>t.editableAnimData.op=e),onInput:e[7]||(e[7]=(...e)=>t.updateAnimData&&t.updateAnimData(...e)),min:t.editableAnimData.ip+1,class:"control-input"},null,40,k),[[l.Jo,t.editableAnimData.op,void 0,{number:!0}]])])])])):(0,a.Q3)("",!0),t.animData&&t.animData.layers?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("h3",null,(0,n.v_)(t.$t("timelineEditor.layersPanel.title")),1),(0,a.Lk)("div",v,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.animData.layers,(i,o)=>((0,a.uX)(),(0,a.CE)("div",{key:i.ind||o,class:(0,n.C4)(["layer-item",{selected:t.selectedLayer===o}]),onClick:e=>t.selectLayer(o)},[(0,a.Lk)("div",b,[(0,a.Lk)("div",f,[(0,a.Lk)("span",D,(0,n.v_)(i.nm||`${t.$t("timelineEditor.layersPanel.layer")} ${i.ind||o+1}`),1),(0,a.Lk)("span",A,(0,n.v_)(t.getLayerTypeName(i.ty)),1)]),(0,a.Lk)("div",E,[(0,a.Lk)("button",{class:(0,n.C4)(["layer-toggle",{hidden:i.hd}]),onClick:(0,l.D$)(e=>t.toggleLayerVisibility(o),["stop"]),title:i.hd?"Show layer":"Hide layer"},[(0,a.Lk)("span",g,(0,n.v_)(i.hd?"visibility_off":"visibility"),1)],10,_)])]),t.selectedLayer===o?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"layer-timeline",onClick:e[10]||(e[10]=(0,l.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",$,[(0,a.Lk)("div",I,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.layersPanel.startFrame"))+":",1),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>i.ip=t,onInput:e[8]||(e[8]=(...e)=>t.updateAnimData&&t.updateAnimData(...e)),min:"0",class:"timeline-input"},null,40,C),[[l.Jo,i.ip,void 0,{number:!0}]])]),(0,a.Lk)("div",w,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.layersPanel.endFrame"))+":",1),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>i.op=t,onInput:e[9]||(e[9]=(...e)=>t.updateAnimData&&t.updateAnimData(...e)),min:i.ip+1,class:"timeline-input"},null,40,T),[[l.Jo,i.op,void 0,{number:!0}]])]),(0,a.Lk)("div",S,[(0,a.Lk)("label",null,(0,n.v_)(t.$t("timelineEditor.layersPanel.duration"))+":",1),(0,a.Lk)("span",x,(0,n.v_)(i.op-i.ip)+" "+(0,n.v_)(t.$t("timelineEditor.animationInfo.frames")),1)])]),(0,a.Lk)("div",V,[(0,a.Lk)("div",R,[(0,a.Lk)("div",{class:"timeline-segment",style:(0,n.Tr)({left:i.ip/t.animData.op*100+"%",width:(i.op-i.ip)/t.animData.op*100+"%"})},null,4)]),(0,a.Lk)("div",U,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Math.ceil(t.animData.op/10),e=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"timeline-marker",style:(0,n.Tr)({left:10*e/t.animData.op*100+"%"})},(0,n.v_)(10*e),5))),128))])])])):(0,a.Q3)("",!0)],10,h))),128))])])):(0,a.Q3)("",!0),(0,a.Lk)("div",W,[(0,a.Lk)("h3",null,(0,n.v_)(t.$t("timelineEditor.quickActions.title")),1),(0,a.Lk)("div",X,[(0,a.Lk)("button",{class:"action-button",onClick:e[11]||(e[11]=(...e)=>t.resetAnimation&&t.resetAnimation(...e))},[e[15]||(e[15]=(0,a.Lk)("span",{class:"material-icons"},"refresh",-1)),(0,a.eW)(" "+(0,n.v_)(t.$t("timelineEditor.quickActions.reset")),1)]),(0,a.Lk)("button",{class:"action-button",onClick:e[12]||(e[12]=(...e)=>t.duplicateLayer&&t.duplicateLayer(...e)),disabled:null===t.selectedLayer},[e[16]||(e[16]=(0,a.Lk)("span",{class:"material-icons"},"content_copy",-1)),(0,a.eW)(" "+(0,n.v_)(t.$t("timelineEditor.quickActions.duplicate")),1)],8,P),(0,a.Lk)("button",{class:"action-button",onClick:e[13]||(e[13]=(...e)=>t.deleteLayer&&t.deleteLayer(...e)),disabled:null===t.selectedLayer||t.animData.layers.length<=1},[e[17]||(e[17]=(0,a.Lk)("span",{class:"material-icons"},"delete",-1)),(0,a.eW)(" "+(0,n.v_)(t.$t("timelineEditor.quickActions.delete")),1)],8,q),(0,a.Lk)("button",{class:"action-button",onClick:e[14]||(e[14]=(...e)=>t.optimizeAnimation&&t.optimizeAnimation(...e))},[e[18]||(e[18]=(0,a.Lk)("span",{class:"material-icons"},"tune",-1)),(0,a.eW)(" "+(0,n.v_)(t.$t("timelineEditor.quickActions.optimize")),1)])])])])])}i(4114),i(8111),i(7588),i(1701);var N=i(6278),z=i(1471),J=(0,a.pM)({data(){return{selectedLayer:null,editableAnimData:{}}},computed:(0,N.aH)(["animData"]),watch:{animData:{handler(t){t&&(this.editableAnimData={...t})},immediate:!0,deep:!0}},methods:{...(0,N.PY)({setAnimData:z.Z5.SET_ANIM_DATA}),updateAnimData(){this.setAnimData(this.editableAnimData)},selectLayer(t){this.selectedLayer=this.selectedLayer===t?null:t},getLayerTypeName(t){const e={0:"Precomp",1:"Solid",2:"Image",3:"Null",4:"Shape",5:"Text",6:"Audio",7:"Video",8:"Image Sequence",9:"Video",10:"Image",11:"Guide",12:"Adjustment",13:"Camera",14:"Light"};return e[t]||`Type ${t}`},toggleLayerVisibility(t){this.editableAnimData.layers&&this.editableAnimData.layers[t]&&(this.editableAnimData.layers[t].hd=!this.editableAnimData.layers[t].hd,this.updateAnimData())},resetAnimation(){confirm(this.$t("timelineEditor.messages.resetConfirm"))&&location.reload()},duplicateLayer(){if(null!==this.selectedLayer&&this.editableAnimData.layers){const t={...this.editableAnimData.layers[this.selectedLayer]};t.ind=Math.max(...this.editableAnimData.layers.map(t=>t.ind||0))+1,t.nm=(t.nm||"Layer")+" Copy",this.editableAnimData.layers.push(t),this.updateAnimData()}},deleteLayer(){null!==this.selectedLayer&&this.editableAnimData.layers&&this.editableAnimData.layers.length>1&&confirm(this.$t("timelineEditor.messages.deleteConfirm"))&&(this.editableAnimData.layers.splice(this.selectedLayer,1),this.selectedLayer=null,this.updateAnimData())},optimizeAnimation(){this.editableAnimData.layers&&this.editableAnimData.layers.forEach(t=>{t.hd&&(t.hd=void 0)}),this.updateAnimData(),alert(this.$t("timelineEditor.messages.optimized"))}}}),M=i(6262);const Q=(0,M.A)(J,[["render",F],["__scopeId","data-v-780497c2"]]);var O=Q},4209:function(t,e,i){var a=i(8227),n=i(6269),l=a("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[l]===t)}},6080:function(t,e,i){var a=i(7476),n=i(9306),l=i(616),o=a(a.bind);t.exports=function(t,e){return n(t),void 0===e?t:l?o(t,e):function(){return t.apply(e,arguments)}}},6269:function(t){t.exports={}},7476:function(t,e,i){var a=i(2195),n=i(9504);t.exports=function(t){if("Function"===a(t))return n(t)}},7588:function(t,e,i){var a=i(6518),n=i(9565),l=i(2652),o=i(9306),r=i(8551),s=i(1767),m=i(9539),d=i(4549),u=d("forEach",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:u},{forEach:function(t){r(this);try{o(t)}catch(a){m(this,"throw",a)}if(u)return n(u,this,t);var e=s(this),i=0;l(e,function(e){t(e,i++)},{IS_RECORD:!0})}})}}]);
//# sourceMappingURL=181.85363fc4.js.map