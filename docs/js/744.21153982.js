"use strict";(self["webpackChunklottie_tgs_toolkit"]=self["webpackChunklottie_tgs_toolkit"]||[]).push([[744],{744:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var i=a(641),r=a(33);const n={id:"editorMain",class:"editor-page"},o={class:"splitSlot"},s={id:"editorHeader",class:"subHeader"},l={class:"splitSlot"},p={key:0,id:"errorMsg"};function c(t,e,a,c,m,u){const d=(0,i.g2)("router-link"),h=(0,i.g2)("router-view"),g=(0,i.g2)("PreviewArea"),k=(0,i.g2)("split-panel");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(k,{layout:"horizontal",init:65,min:20,max:80,id:"mainSplit"},{1:(0,i.k6)(()=>[(0,i.Lk)("div",o,[(0,i.Lk)("div",s,[(0,i.bF)(d,{to:"/editor"},{default:(0,i.k6)(()=>[...e[0]||(e[0]=[(0,i.eW)(" Timeline Editor ",-1),(0,i.Lk)("span",{class:"material-icons"},"playlist_play",-1)])]),_:1}),(0,i.bF)(d,{to:"/editor/json"},{default:(0,i.k6)(()=>[...e[1]||(e[1]=[(0,i.eW)(" JSON Data ",-1),(0,i.Lk)("span",{class:"material-icons"},"code",-1)])]),_:1})]),(0,i.bF)(h,{class:"slotContent"})])]),2:(0,i.k6)(()=>[(0,i.Lk)("div",l,[e[2]||(e[2]=(0,i.Lk)("div",{id:"previewHeader",class:"subHeader"},[(0,i.Lk)("div",{style:{display:"inline-block"}},[(0,i.eW)(" Animation "),(0,i.Lk)("span",{class:"material-icons"},"movie")])],-1)),(0,i.bF)(g,{class:"slotContent"})])]),_:1}),t.errorMsg?((0,i.uX)(),(0,i.CE)("div",p,(0,r.v_)(t.errorMsg),1)):(0,i.Q3)("",!0)])}function m(t,e,a,n,o,s){return(0,i.uX)(),(0,i.CE)("div",{class:(0,r.C4)(["split-panel",{dragging:t.dragging,vert:"vertical"==t.layoutType,hori:"horizontal"==t.layoutType}]),onMousemove:e[1]||(e[1]=(...e)=>t.dragMove&&t.dragMove(...e)),onMouseup:e[2]||(e[2]=(...e)=>t.dragStop&&t.dragStop(...e))},[(0,i.Lk)("div",{class:"split-panel-part",style:(0,r.Tr)("horizontal"==t.layoutType?{width:t.panelSize1}:{height:t.panelSize1})},[(0,i.RG)(t.$slots,"1")],4),(0,i.Lk)("div",{class:"split-panel-gutter",onMousedown:e[0]||(e[0]=(...e)=>t.dragStart&&t.dragStart(...e)),style:(0,r.Tr)("horizontal"==t.layoutType?{width:t.gutterSizeString}:{height:t.gutterSizeString})},null,36),(0,i.Lk)("div",{class:"split-panel-part",style:(0,r.Tr)("horizontal"==t.layoutType?{width:t.panelSize2}:{height:t.panelSize2})},[(0,i.RG)(t.$slots,"2")],4)],34)}var u=(0,i.pM)({props:["layout","gutter","init","min","max"],data(){return{layoutType:this.layout||"horizontal",gutterSize:this.gutter||3,percent:this.init||50,minPercent:this.min||0,maxPercent:this.max||100,dragging:!1,startPos:0,startSplit:0}},computed:{gutterSizeString(){return`${this.gutterSize}px`},panelSize1(){return this.percent<this.minPercent&&(this.percent=this.minPercent),`calc(${this.percent}% - ${this.gutterSize}px)`},panelSize2(){return this.percent>this.maxPercent&&(this.percent=this.maxPercent),100-this.percent+"%"}},methods:{dragStart(t){t.preventDefault(),this.dragging=!0,this.startPos="horizontal"===this.layoutType?t.pageX:t.pageY,this.startSplit=this.percent,t.stopPropagation()},dragMove(t){if(this.dragging){t.preventDefault();const e=("horizontal"===this.layoutType?t.pageX:t.pageY)-this.startPos,a="horizontal"===this.layoutType?this.$el.offsetWidth:this.$el.offsetHeight;this.percent=this.startSplit+e/a*100,t.stopPropagation()}},dragStop(t){this.dragging&&(t.preventDefault(),this.dragging=!1,t.stopPropagation())}}}),d=a(6262);const h=(0,d.A)(u,[["render",m]]);var g=h;const k={id:"previewAreaMain"},v={id:"playbackButtons"},y={key:0},S={key:1},f={class:"export-buttons"};function b(t,e,a,r,n,o){const s=(0,i.g2)("LottieAnimation");return(0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(s,{animData:this.animData,onNewAnim:e[0]||(e[0]=t=>this.anim=t)},null,8,["animData"]),(0,i.Lk)("p",v,[(0,i.Lk)("span",{onClick:e[1]||(e[1]=t=>{this.anim.goToAndStop(this.anim.firstFrame,!0)}),class:"material-icons black-button",title:"First frame (down arrow)"},"first_page"),(0,i.Lk)("span",{onClick:e[2]||(e[2]=(...e)=>t.goToPrevFrame&&t.goToPrevFrame(...e)),class:"material-icons black-button",title:"Previous frame (left arrow)"},"chevron_left"),(0,i.Lk)("span",{onClick:e[3]||(e[3]=t=>{this.anim.togglePause()}),class:"material-icons black-button",title:"Play/pause (spacebar)"},[this.anim&&this.anim.isPaused?((0,i.uX)(),(0,i.CE)("span",y,"play_arrow")):((0,i.uX)(),(0,i.CE)("span",S,"pause"))]),(0,i.Lk)("span",{onClick:e[4]||(e[4]=(...e)=>t.goToNextFrame&&t.goToNextFrame(...e)),class:"material-icons black-button",title:"Next frame (right arrow)"},"chevron_right"),(0,i.Lk)("span",{onClick:e[5]||(e[5]=t=>{this.anim.goToAndStop(this.anim.firstFrame+this.anim.totalFrames,!0)}),class:"material-icons black-button",title:"Last frame (up arrow)"},"last_page")]),e[8]||(e[8]=(0,i.Lk)("h4",null,"Export animation:",-1)),(0,i.Lk)("div",f,[(0,i.Lk)("button",{onClick:e[6]||(e[6]=t=>this.exportAnimation(".tgs")),class:"text-button primary"},"Save as TGS"),(0,i.Lk)("button",{onClick:e[7]||(e[7]=t=>this.exportAnimation(".json")),class:"text-button"},"Save as JSON")])])}var w=a(6278),L=a(6145),F=a(1106),T=a(3075),P=(0,i.pM)({components:{LottieAnimation:L.A},data(){return{anim:null}},computed:(0,w.aH)(["animData"]),methods:{goToPrevFrame(){if(null==this.anim)return;let t=Math.round(this.anim.currentFrame-.55);t<this.anim.firstFrame&&(t+=this.anim.totalFrames),this.anim.goToAndStop(t,!0)},goToNextFrame(){if(null==this.anim)return;let t=Math.round(this.anim.currentFrame+.55);t>=this.anim.firstFrame+this.anim.totalFrames&&(t-=this.anim.totalFrames),this.anim.goToAndStop(t,!0)},globalKeypress(t){if(t.target){const e=t.target.nodeName.toLowerCase();if("textarea"==e||"input"==e)return}"Space"===t.code?this.anim?.togglePause():"ArrowLeft"===t.code?this.goToPrevFrame():"ArrowRight"===t.code?this.goToNextFrame():"ArrowUp"===t.code?this.anim?.goToAndStop(this.anim.firstFrame+this.anim.totalFrames,!0):"ArrowDown"===t.code&&this.anim?.goToAndStop(this.anim.firstFrame,!0)},exportAnimation(t){let e=JSON.stringify(this.animData);".tgs"==t&&(e=(0,T.ZI)(e)),(0,F.v)(this.animData.nm,t,e)}},mounted(){window.addEventListener("keydown",this.globalKeypress)},beforeUnmount(){window.removeEventListener("keydown",this.globalKeypress)}});const A=(0,d.A)(P,[["render",b],["__scopeId","data-v-ab15b194"]]);var x=A,z=(0,i.pM)({components:{SplitPanel:g,PreviewArea:x},computed:{errorMsg(){return(0,w.Pj)().state.errorMsg}},mounted(){const t=document.querySelector(".content");t&&t.classList.add("editor-page")},beforeUnmount(){const t=document.querySelector(".content");t&&t.classList.remove("editor-page")}});const C=(0,d.A)(z,[["render",c],["__scopeId","data-v-b5540f80"]]);var M=C}}]);
//# sourceMappingURL=744.21153982.js.map